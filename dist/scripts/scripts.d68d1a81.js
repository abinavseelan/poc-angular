"use strict";angular.module("pocAngularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","infinite-scroll"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/newsfeed.html",controller:"NewsfeedCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/create",{templateUrl:"views/create_post.html",controller:"CreatepostCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope",function(a){a.postsEndPoint="https://poc-inquizit-api.herokuapp.com/api1/posts",a.usersEndPoint="https://poc-inquizit-api.herokuapp.com/api1/users"}]),angular.module("pocAngularApp").controller("MainCtrl",["$scope","$http","$rootScope",function(a,b,c){a.users={},a.getUsers=function(a){return b({method:"GET",url:c.usersEndPoint,params:{name:a}}).then(function(a){return a.data.map(function(a){return a.first_name})},function(a){console.log(a)})}}]),angular.module("pocAngularApp").controller("NewsfeedCtrl",["InfiniteScroll","$scope",function(a,b){b.InfiniteScroll=new a}]),angular.module("pocAngularApp").controller("ProfileCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("pocAngularApp").factory("InfiniteScroll",["$http","$rootScope",function(a,b){var c=function(){this.posts=[],this.busy=!1,this.postsDone=0};return c.prototype.nextPage=function(){this.busy||(this.busy=!0,a({method:"GET",url:b.postsEndPoint,params:{skip:this.postsDone,limit:10}}).then(function(a){for(var b=a.data,c=0;c<b.length;c++)console.log(b[c]),this.posts.push(b[c]);this.postsDone+=b.length,this.busy=!1}.bind(this)))},c}]),angular.module("pocAngularApp").controller("CreatepostCtrl",["$scope","Embedly","$http","$rootScope","$location",function(a,b,c,d,e){a.created_post={creator:"Abinav Seelan",desc:"",question:"",embedded_content:{}},a.create=function(){b.getData(a.url).then(function(b){a.created_post.embedded_content=b,c({method:"POST",url:d.postsEndPoint,data:a.created_post}).then(function(a){console.log(a),e.path("/")},function(a){console.log(a)})})}}]),angular.module("pocAngularApp").factory("Embedly",["$http","$q",function(a,b){var c="041a06144b934ae5800557263be96f9a",d=b.defer();return{getData:function(b){return a({method:"GET",url:"http://api.embed.ly/1/oembed",params:{key:c,url:b,maxwidth:200,luxe:1,chars:150}}).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise}}}]);